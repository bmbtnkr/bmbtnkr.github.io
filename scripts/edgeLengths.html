<pre style='color:#000020;background:#f6f8ff;'><html><body style='color:#000020; background:#f6f8ff; '><pre>
<span style='color:#595979; '>"""</span>
<span style='color:#595979; '>import maya.cmds as cmds</span>
<span style='color:#595979; '>cmds.unloadPlugin("edgeLengths.py")</span>
<span style='color:#595979; '>cmds.loadPlugin("edgeLengths.py")</span>
<span style='color:#595979; '>cmds.tbEdgeLengths()</span>
<span style='color:#595979; '>"""</span>

<span style='color:#200080; font-weight:bold; '>import</span> maya<span style='color:#308080; '>.</span>OpenMaya as OpenMaya
<span style='color:#200080; font-weight:bold; '>import</span> maya<span style='color:#308080; '>.</span>OpenMayaMPx as OpenMayaMPx

kPluginCmdName <span style='color:#308080; '>=</span> <span style='color:#1060b6; '>"tbEdgeLengths"</span>


<span style='color:#200080; font-weight:bold; '>class</span> MyCommandClass<span style='color:#308080; '>(</span>OpenMayaMPx<span style='color:#308080; '>.</span>MPxCommand<span style='color:#308080; '>)</span><span style='color:#308080; '>:</span>
    <span style='color:#200080; font-weight:bold; '>def</span> <span style='color:#e34adc; '>__init__</span><span style='color:#308080; '>(</span>self<span style='color:#308080; '>)</span><span style='color:#308080; '>:</span>
        <span style='color:#595979; '>''' Constructor '''</span>
        OpenMayaMPx<span style='color:#308080; '>.</span>MPxCommand<span style='color:#308080; '>.</span><span style='color:#e34adc; '>__init__</span><span style='color:#308080; '>(</span>self<span style='color:#308080; '>)</span>

    <span style='color:#200080; font-weight:bold; '>def</span> doIt<span style='color:#308080; '>(</span>self<span style='color:#308080; '>,</span> argList<span style='color:#308080; '>)</span><span style='color:#308080; '>:</span>
        <span style='color:#595979; '>''' Command execution '''</span>
        sel <span style='color:#308080; '>=</span> OpenMaya<span style='color:#308080; '>.</span>MSelectionList<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span>
        OpenMaya<span style='color:#308080; '>.</span>MGlobal<span style='color:#308080; '>.</span>getActiveSelectionList<span style='color:#308080; '>(</span>sel<span style='color:#308080; '>)</span>
        edgeLengths <span style='color:#308080; '>=</span> <span style='color:#308080; '>[</span><span style='color:#308080; '>]</span>
        <span style='color:#e34adc; '>iter</span> <span style='color:#308080; '>=</span> OpenMaya<span style='color:#308080; '>.</span>MItSelectionList<span style='color:#308080; '>(</span>sel<span style='color:#308080; '>)</span>

        <span style='color:#200080; font-weight:bold; '>while</span> <span style='color:#200080; font-weight:bold; '>not</span> <span style='color:#e34adc; '>iter</span><span style='color:#308080; '>.</span>isDone<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span><span style='color:#308080; '>:</span>
            dagPath <span style='color:#308080; '>=</span> OpenMaya<span style='color:#308080; '>.</span>MDagPath<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span>
            <span style='color:#e34adc; '>iter</span><span style='color:#308080; '>.</span>getDagPath<span style='color:#308080; '>(</span>dagPath<span style='color:#308080; '>)</span>
            node <span style='color:#308080; '>=</span> OpenMaya<span style='color:#308080; '>.</span>MObject<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span>
            <span style='color:#e34adc; '>iter</span><span style='color:#308080; '>.</span>getDependNode<span style='color:#308080; '>(</span>node<span style='color:#308080; '>)</span>
            iterEdge <span style='color:#308080; '>=</span> OpenMaya<span style='color:#308080; '>.</span>MItMeshEdge<span style='color:#308080; '>(</span>node<span style='color:#308080; '>)</span>

            <span style='color:#200080; font-weight:bold; '>while</span> <span style='color:#200080; font-weight:bold; '>not</span> iterEdge<span style='color:#308080; '>.</span>isDone<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span><span style='color:#308080; '>:</span>
                util <span style='color:#308080; '>=</span> OpenMaya<span style='color:#308080; '>.</span>MScriptUtil<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span>
                doublePtr <span style='color:#308080; '>=</span> util<span style='color:#308080; '>.</span>asDoublePtr<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span>
                iterEdge<span style='color:#308080; '>.</span>getLength<span style='color:#308080; '>(</span>doublePtr<span style='color:#308080; '>)</span>
                length <span style='color:#308080; '>=</span> OpenMaya<span style='color:#308080; '>.</span>MScriptUtil<span style='color:#308080; '>.</span>getDouble<span style='color:#308080; '>(</span>doublePtr<span style='color:#308080; '>)</span>
                length <span style='color:#308080; '>=</span> <span style='color:#308080; '>(</span><span style='color:#1060b6; '>"{0:.2f}"</span><span style='color:#308080; '>.</span>format<span style='color:#308080; '>(</span><span style='color:#e34adc; '>round</span><span style='color:#308080; '>(</span>length<span style='color:#308080; '>,</span> <span style='color:#008c00; '>2</span><span style='color:#308080; '>)</span><span style='color:#308080; '>)</span><span style='color:#308080; '>)</span>
                edgeLengths<span style='color:#308080; '>.</span>append<span style='color:#308080; '>(</span>length<span style='color:#308080; '>)</span>
                iterEdge<span style='color:#308080; '>.</span>next<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span>

            <span style='color:#e34adc; '>iter</span><span style='color:#308080; '>.</span>next<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span>

        <span style='color:#200080; font-weight:bold; '>print</span> edgeLengths


<span style='color:#200080; font-weight:bold; '>def</span> cmdCreator<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span><span style='color:#308080; '>:</span>
    <span style='color:#595979; '>''' Create an instance of our command '''</span>
    <span style='color:#200080; font-weight:bold; '>return</span> OpenMayaMPx<span style='color:#308080; '>.</span>asMPxPtr<span style='color:#308080; '>(</span>MyCommandClass<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span><span style='color:#308080; '>)</span>


<span style='color:#200080; font-weight:bold; '>def</span> syntaxCreator<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span><span style='color:#308080; '>:</span>
    <span style='color:#595979; '>''' Define command flags '''</span>
    syntax <span style='color:#308080; '>=</span> OpenMaya<span style='color:#308080; '>.</span>MSyntax<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span>
    <span style='color:#200080; font-weight:bold; '>return</span> syntax


<span style='color:#200080; font-weight:bold; '>def</span> initializePlugin<span style='color:#308080; '>(</span>mobject<span style='color:#308080; '>)</span><span style='color:#308080; '>:</span>
    <span style='color:#595979; '>''' Initialize the plug-in when Maya loads it'''</span>
    mplugin <span style='color:#308080; '>=</span> OpenMayaMPx<span style='color:#308080; '>.</span>MFnPlugin<span style='color:#308080; '>(</span>mobject<span style='color:#308080; '>,</span> <span style='color:#1060b6; '>'Tom Banker'</span><span style='color:#308080; '>,</span> <span style='color:#1060b6; '>'1.0'</span><span style='color:#308080; '>,</span> <span style='color:#1060b6; '>'Any'</span><span style='color:#308080; '>)</span>
    <span style='color:#200080; font-weight:bold; '>try</span><span style='color:#308080; '>:</span>
        mplugin<span style='color:#308080; '>.</span>registerCommand<span style='color:#308080; '>(</span>kPluginCmdName<span style='color:#308080; '>,</span> cmdCreator<span style='color:#308080; '>,</span> syntaxCreator<span style='color:#308080; '>)</span>
    <span style='color:#200080; font-weight:bold; '>except</span><span style='color:#308080; '>:</span>
        <span style='color:#200080; font-weight:bold; '>raise</span> <span style='color:#e34adc; '>RuntimeError</span><span style='color:#308080; '>(</span><span style='color:#1060b6; '>'Failed to register command: %s\n'</span> <span style='color:#308080; '>%</span> kPluginCmdName<span style='color:#308080; '>)</span>


<span style='color:#200080; font-weight:bold; '>def</span> uninitializePlugin<span style='color:#308080; '>(</span>mobject<span style='color:#308080; '>)</span><span style='color:#308080; '>:</span>
    <span style='color:#595979; '>''' Uninitialize the plug-in when Maya un-loads it '''</span>
    mplugin <span style='color:#308080; '>=</span> OpenMayaMPx<span style='color:#308080; '>.</span>MFnPlugin<span style='color:#308080; '>(</span>mobject<span style='color:#308080; '>)</span>
    <span style='color:#200080; font-weight:bold; '>try</span><span style='color:#308080; '>:</span>
        mplugin<span style='color:#308080; '>.</span>deregisterCommand<span style='color:#308080; '>(</span>kPluginCmdName<span style='color:#308080; '>)</span>
    <span style='color:#200080; font-weight:bold; '>except</span><span style='color:#308080; '>:</span>
        <span style='color:#200080; font-weight:bold; '>raise</span> <span style='color:#e34adc; '>RuntimeError</span><span style='color:#308080; '>(</span><span style='color:#1060b6; '>'Failed to unregister command: %s\n'</span> <span style='color:#308080; '>%</span> kPluginCmdName<span style='color:#308080; '>)</span>
</pre>
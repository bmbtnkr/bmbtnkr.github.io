<pre style='color:#000020;background:#f6f8ff;'><html><body style='color:#000020; background:#f6f8ff; '><pre>
<span style='color:#200080; font-weight:bold; '>import</span> maya<span style='color:#308080; '>.</span>cmds as cmds
<span style='color:#200080; font-weight:bold; '>import</span> maya<span style='color:#308080; '>.</span>OpenMaya as OpenMaya

<span style='color:#200080; font-weight:bold; '>def</span> createPoleVector<span style='color:#308080; '>(</span>prefix<span style='color:#308080; '>=</span><span style='color:#e34adc; '>None</span><span style='color:#308080; '>,</span> distanceScale<span style='color:#308080; '>=</span><span style='color:#008c00; '>2</span><span style='color:#308080; '>,</span> verbose<span style='color:#308080; '>=</span><span style='color:#e34adc; '>False</span><span style='color:#308080; '>)</span><span style='color:#308080; '>:</span>
    <span style='color:#200080; font-weight:bold; '>print</span> <span style='color:#1060b6; '>'Building pole vector...'</span>

    <span style='color:#200080; font-weight:bold; '>if</span> prefix <span style='color:#200080; font-weight:bold; '>is</span> <span style='color:#e34adc; '>None</span><span style='color:#308080; '>:</span>
        prefix <span style='color:#308080; '>=</span> <span style='color:#1060b6; '>''</span>

    <span style='color:#595979; '># I'm using hard-coded joint names for this example</span>
    <span style='color:#595979; '># Create Joint Vectors</span>
    <span style='color:#200080; font-weight:bold; '>try</span><span style='color:#308080; '>:</span>
        shoulderIkPos <span style='color:#308080; '>=</span> cmds<span style='color:#308080; '>.</span>xform<span style='color:#308080; '>(</span><span style='color:#1060b6; '>'shldr_jnt'</span><span style='color:#308080; '>,</span> q<span style='color:#308080; '>=</span><span style='color:#e34adc; '>True</span><span style='color:#308080; '>,</span> ws<span style='color:#308080; '>=</span><span style='color:#e34adc; '>True</span><span style='color:#308080; '>,</span> t<span style='color:#308080; '>=</span><span style='color:#e34adc; '>True</span><span style='color:#308080; '>)</span>
        shoulderIkVec <span style='color:#308080; '>=</span> OpenMaya<span style='color:#308080; '>.</span>MVector<span style='color:#308080; '>(</span>shoulderIkPos<span style='color:#308080; '>[</span><span style='color:#008c00; '>0</span><span style='color:#308080; '>]</span><span style='color:#308080; '>,</span> shoulderIkPos<span style='color:#308080; '>[</span><span style='color:#008c00; '>1</span><span style='color:#308080; '>]</span><span style='color:#308080; '>,</span> shoulderIkPos<span style='color:#308080; '>[</span><span style='color:#008c00; '>2</span><span style='color:#308080; '>]</span><span style='color:#308080; '>)</span>
        elbowIkPos <span style='color:#308080; '>=</span> cmds<span style='color:#308080; '>.</span>xform<span style='color:#308080; '>(</span><span style='color:#1060b6; '>'elbw_jnt'</span><span style='color:#308080; '>,</span> q<span style='color:#308080; '>=</span><span style='color:#e34adc; '>True</span><span style='color:#308080; '>,</span> ws<span style='color:#308080; '>=</span><span style='color:#e34adc; '>True</span><span style='color:#308080; '>,</span> t<span style='color:#308080; '>=</span><span style='color:#e34adc; '>True</span><span style='color:#308080; '>)</span>
        elbowIkVec <span style='color:#308080; '>=</span> OpenMaya<span style='color:#308080; '>.</span>MVector<span style='color:#308080; '>(</span>elbowIkPos<span style='color:#308080; '>[</span><span style='color:#008c00; '>0</span><span style='color:#308080; '>]</span><span style='color:#308080; '>,</span> elbowIkPos<span style='color:#308080; '>[</span><span style='color:#008c00; '>1</span><span style='color:#308080; '>]</span><span style='color:#308080; '>,</span> elbowIkPos<span style='color:#308080; '>[</span><span style='color:#008c00; '>2</span><span style='color:#308080; '>]</span><span style='color:#308080; '>)</span>
        wristIkPos <span style='color:#308080; '>=</span> cmds<span style='color:#308080; '>.</span>xform<span style='color:#308080; '>(</span><span style='color:#1060b6; '>'wrst_jnt'</span><span style='color:#308080; '>,</span> q<span style='color:#308080; '>=</span><span style='color:#e34adc; '>True</span><span style='color:#308080; '>,</span> ws<span style='color:#308080; '>=</span><span style='color:#e34adc; '>True</span><span style='color:#308080; '>,</span> t<span style='color:#308080; '>=</span><span style='color:#e34adc; '>True</span><span style='color:#308080; '>)</span>
        wristIkVec <span style='color:#308080; '>=</span> OpenMaya<span style='color:#308080; '>.</span>MVector<span style='color:#308080; '>(</span>wristIkPos<span style='color:#308080; '>[</span><span style='color:#008c00; '>0</span><span style='color:#308080; '>]</span><span style='color:#308080; '>,</span> wristIkPos<span style='color:#308080; '>[</span><span style='color:#008c00; '>1</span><span style='color:#308080; '>]</span><span style='color:#308080; '>,</span> wristIkPos<span style='color:#308080; '>[</span><span style='color:#008c00; '>2</span><span style='color:#308080; '>]</span><span style='color:#308080; '>)</span>
    <span style='color:#200080; font-weight:bold; '>except</span><span style='color:#308080; '>:</span>
            cmds<span style='color:#308080; '>.</span>error<span style='color:#308080; '>(</span><span style='color:#1060b6; '>'All arm joints not found or named incorrectly'</span><span style='color:#308080; '>)</span>

    <span style='color:#595979; '># Transpose vectors to correct pole vector translation point</span>
    bisectorVec <span style='color:#308080; '>=</span> <span style='color:#308080; '>(</span>shoulderIkVec <span style='color:#308080; '>*</span> <span style='color:#008000; '>0.5</span><span style='color:#308080; '>)</span> <span style='color:#308080; '>+</span> <span style='color:#308080; '>(</span>wristIkVec <span style='color:#308080; '>*</span> <span style='color:#008000; '>0.5</span><span style='color:#308080; '>)</span>
    transposedVec <span style='color:#308080; '>=</span> <span style='color:#308080; '>(</span>elbowIkVec <span style='color:#308080; '>*</span> distanceScale<span style='color:#308080; '>)</span> <span style='color:#308080; '>-</span> <span style='color:#308080; '>(</span>bisectorVec <span style='color:#308080; '>*</span> distanceScale<span style='color:#308080; '>)</span>
    ikChainPoleVec <span style='color:#308080; '>=</span> bisectorVec <span style='color:#308080; '>+</span> transposedVec

    <span style='color:#595979; '># Create a pole vector</span>
    poleVecCon <span style='color:#308080; '>=</span> cmds<span style='color:#308080; '>.</span>spaceLocator<span style='color:#308080; '>(</span>name<span style='color:#308080; '>=</span><span style='color:#1060b6; '>'%selbowPV'</span> <span style='color:#308080; '>%</span> prefix<span style='color:#308080; '>)</span>
    poleVecPos <span style='color:#308080; '>=</span> <span style='color:#308080; '>[</span>ikChainPoleVec<span style='color:#308080; '>.</span>x<span style='color:#308080; '>,</span> ikChainPoleVec<span style='color:#308080; '>.</span>y<span style='color:#308080; '>,</span> ikChainPoleVec<span style='color:#308080; '>.</span>z<span style='color:#308080; '>]</span>
    cmds<span style='color:#308080; '>.</span>xform<span style='color:#308080; '>(</span>poleVecCon<span style='color:#308080; '>,</span> t<span style='color:#308080; '>=</span>poleVecPos<span style='color:#308080; '>)</span>
    cmds<span style='color:#308080; '>.</span>delete<span style='color:#308080; '>(</span>cmds<span style='color:#308080; '>.</span>orientConstraint<span style='color:#308080; '>(</span><span style='color:#1060b6; '>'elbw_jnt'</span><span style='color:#308080; '>,</span> poleVecCon<span style='color:#308080; '>)</span><span style='color:#308080; '>)</span>

    <span style='color:#595979; '># Visualize Vectors and End Points</span>
    <span style='color:#200080; font-weight:bold; '>if</span> verbose<span style='color:#308080; '>:</span>
        <span style='color:#200080; font-weight:bold; '>for</span> vector<span style='color:#308080; '>,</span> letter <span style='color:#200080; font-weight:bold; '>in</span> zip<span style='color:#308080; '>(</span><span style='color:#308080; '>[</span>bisectorVec<span style='color:#308080; '>,</span> transposedVec<span style='color:#308080; '>,</span> ikChainPoleVec<span style='color:#308080; '>,</span>
                                   shoulderIkVec<span style='color:#308080; '>,</span> elbowIkVec<span style='color:#308080; '>,</span> wristIkVec<span style='color:#308080; '>]</span><span style='color:#308080; '>,</span>
                                  <span style='color:#308080; '>[</span><span style='color:#1060b6; '>'bisectorVec'</span><span style='color:#308080; '>,</span> <span style='color:#1060b6; '>'transposedVec'</span><span style='color:#308080; '>,</span> <span style='color:#1060b6; '>'ikChainPoleVec'</span><span style='color:#308080; '>,</span>
                                  <span style='color:#1060b6; '>'shoulderIk'</span><span style='color:#308080; '>,</span> <span style='color:#1060b6; '>'elbowIk'</span><span style='color:#308080; '>,</span> <span style='color:#1060b6; '>'wristIk'</span><span style='color:#308080; '>]</span><span style='color:#308080; '>)</span><span style='color:#308080; '>:</span>
            cmds<span style='color:#308080; '>.</span>spaceLocator<span style='color:#308080; '>(</span>n<span style='color:#308080; '>=</span><span style='color:#1060b6; '>'%sVecLoc'</span> <span style='color:#308080; '>%</span> letter<span style='color:#308080; '>,</span> p<span style='color:#308080; '>=</span><span style='color:#308080; '>[</span>vector<span style='color:#308080; '>.</span>x<span style='color:#308080; '>,</span> vector<span style='color:#308080; '>.</span>y<span style='color:#308080; '>,</span> vector<span style='color:#308080; '>.</span>z<span style='color:#308080; '>]</span><span style='color:#308080; '>)</span>
            cmds<span style='color:#308080; '>.</span>curve<span style='color:#308080; '>(</span>n<span style='color:#308080; '>=</span><span style='color:#1060b6; '>'%sVecCurve'</span> <span style='color:#308080; '>%</span> letter<span style='color:#308080; '>,</span> degree<span style='color:#308080; '>=</span><span style='color:#008c00; '>1</span><span style='color:#308080; '>,</span> p<span style='color:#308080; '>=</span><span style='color:#308080; '>[</span><span style='color:#308080; '>(</span><span style='color:#008c00; '>0</span><span style='color:#308080; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#308080; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#308080; '>)</span><span style='color:#308080; '>,</span> <span style='color:#308080; '>(</span>vector<span style='color:#308080; '>.</span>x<span style='color:#308080; '>,</span> vector<span style='color:#308080; '>.</span>y<span style='color:#308080; '>,</span> vector<span style='color:#308080; '>.</span>z<span style='color:#308080; '>)</span><span style='color:#308080; '>]</span><span style='color:#308080; '>)</span>

    <span style='color:#200080; font-weight:bold; '>return</span> poleVecCon
</pre>